"use client";
import { DescktopSideBarItems } from "@/constants";
import { cn } from "@/lib/utils";
import { ChevronRight } from "lucide-react";
import Link from "next/link";
import { usePathname } from "next/navigation";
import { RefObject, useState } from "react";
type EditorLeftbarProps = {
headerRef: RefObject<HTMLDivElement>;
};

export default function EditorLeftbar({ headerRef }: EditorLeftbarProps) {
  const pathname = usePathname();
  const [state, setStat] = useState<"collapsed" | "expanded">("collapsed");

  return (
    <div
      className="relative hidden sm:flex flex-col w-14"
      style={{
        height: `calc(100vh - ${headerRef.current?.offsetHeight || 50}px`,
      }}
    >
      <nav
        // onMouseEnter={() => setStat("expanded")}
        // onMouseLeave={() => setStat("collapsed")}
        data-state={state}
        // bg-[var(--navbar)]
        className="group bg-[var(--navbar)] py-2 z-10 h-full w-14 data-[state=expanded]:w-[13rem] border-r bg-dash-sidebar border-default data-[state=expanded]:shadow-xl transition-width duration-200 hide-scrollbar flex flex-col justify-start overflow-y-auto scrollbar-hide"
        // className="flex group fixed bg-[var(--navbar)] pb-2 pt-5 z-10 min-h-screen w-14 data-[state=expanded]:w-[13rem] data-[state=expanded]:shadow-xl transition-width duration-200 flex-col justify-between overflow-auto"
      >
        <div className=" top-3 -right-5 h-10 flex justify-center items-center bg-red-500">
          <ChevronRight className="w-5 h-5" />
        </div>
        <ul className="flex flex-col gap-y-1 justify-start px-2 relative">
          {DescktopSideBarItems.map((item) => {
            return (
              <Link
                href={item.route}
                key={item.label}
                className="relative h-10 w-10 group-data-[state=expanded]:w-full transition-all duration-200 flex items-center rounded group-data-[state=collapsed]:justify-center group-data-[state=expanded]:-space-x-2 hover:bg-[var(--navbar-item-active)] group/item shad"
              >
                <span className="absolute left-0 top-0 flex rounded h-10 w-10 items-center justify-center  transition-colors">
                  {
                    <item.icon
                      className={cn(
                        "w-5 h-5 text-primary-foreground fill-primary-foreground group-hover/item:fill-primary",
                        {
                          "fill-primary":
                            pathname === item.route &&
                            pathname.startsWith(item.route),
                        }
                      )}
                    />
                  }
                </span>
                <span className="min-w-[128px] text-sm text-primary-foreground absolute left-7 group-data-[state=expanded]:left-12 opacity-0 group-data-[state=expanded]:opacity-100 transition-all">
                  {item.label}
                </span>
              </Link>
            );
          })}
        </ul>
        
      </nav>
    </div>
  );
}
